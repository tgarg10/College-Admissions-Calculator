import requests
'''
t = ()

for sl in range(1200,1600,10):
    f = requests.get('https://www.admitsee.com/searchundergrad?sp=&mj=&ex=&s=&sc=Stanford+University+Stanford+CA777Stanford*&kwn=&gl=&gh=&gl_w=&gh_w=&gl_u=&gh_u=&al=&ah=&et=&th=&ge=&ho=&un=1&gr=0&sl='+str(sl)+'&sh='+str(sl+10),'html.parser')
    s = f.text
    l = s.split("<a class='photo-frame-photo2' href=\"https://www.admitsee.com/profile-detail/")[1:]
    for i in l:
        t += (i[:6].replace('"','').replace(' ',''),)
print(t)
print(len(t))
'''
t = {'68149', '223520', '223653', '9257', '191606', '191294', '161947', '86849', '8535', '37189', '54631', '56786', '52357', '52330', '52031', '44976', '168694', '151408', '42663', '253085', '55338', '42663', '52195', '52058', '31591',}
s = {'64423', '64423', '475196', '475196', '65623', '65623', '395841', '66901', '395841', '66901', '221032', '395945', '221032', '395945', '206428', '206428', '8257', '460962', '52382', '8257', '88055', '8288', '460962', '52382', '8356', '88055', '57311', '8338', '8288', '8356', '57311', '8338', '7528', '180508', '52615', '257564', '458753', '220994', '7528', '8189', '180508', '52615', '8503', '8251', '257564', '504135', '458753', '220994', '44765', '8287', '8189', '167581', '65680', '8503', '8251', '233708', '504135', '436678', '44765', '8287', '167581', '65680', '233708', '436678', '66365', '8253', '218274', '65776', '8353', '88258', '236487', '210444', '70226', '8292', '408399', '54451', '52984', '8280', '66365', '8253', '379277', '218274', '65776', '67702', '38558', '55874', '9017', '70462', '8353', '88258', '236487', '210444', '192392', '70226', '8292', '408399', '167593', '67945', '54451', '52984', '8280', '379277', '67702', '38558', '8270', '55874', '239611', '9017', '8833', '70462', '393558', '65876', '192392', '65118', '30970', '167593', '67945', '56037', '342370', '225574', '9251', '8270', '184100', '239611', '8833', '8326', '393558', '67906', '65876', '218164', '65118', '30970', '12216', '67358', '56037', '8293', '342370', '86535', '41640', '8282', '225574', '55957', '9251', '8569', '184100', '8271', '38092', '8326', '44831', '8324', '317094', '8252', '226559', '67906', '218164', '50339', '12216', '79563', '418039', '67358', '43432', '8540', '178408', '8293', '86535', '41640', '8354', '8282', '57509', '55957', '8569', '224385', '65900', '8271', '38092', '327656', '44831', '37295', '8324', '317094', '220907', '46912', '8252', '226559', '185027', '51258', '10293', '50339', '79563', '418039', '408612', '65248', '43432', '8540', '178408', '43968', '8354', '57509', '55839', '224385', '65900', '17200', '408483', '327656', '37295', '220907', '46912', '43400', '185027', '51258', '10293', '433655', '408612', '179321', '65248', '43968', '216912', '92354', '53171', '55839', '43453', '17200', '10112', '9084', '408483', '10198', '43400', '12479', '221011', '56031', '43511', '433655', '418862', '220991', '179321', '82175', '487869', '46772', '21186', '9255', '216912', '92354', '53171', '10114', '9409', '221222', '65722', '43453', '66014', '51757', '10112', '406871', '9084', '10198', '10189', '113071', '19204', '8275', '102146', '12479', '315122', '221011', '56031', '114896', '339486', '111862', '66084', '56941', '56082', '43511', '13898', '496579', '418862', '339482', '334115', '220991', '82175', '70942', '64861', '41334', '487869', '46772', '44767', '21186', '9255', '46879', '19161', '11589', '10250', '10114', '9409', '221222', '221006', '81320', '67617', '22232', '14689', '8546', '8304', '231029', '69319', '65722', '43633', '391797', '193427', '66014', '58201', '51757', '8283', '315122', '221320', '221229', '220823', '66170', '114896', '435236', '339486', '111862', '66169', '66084', '56941', '56082', '13898', '516043', '496579', '339482', '334115', '71799', '70942', '64861', '41334', '102164', '69699', '44767', '176314', '70892', '52988', '46879', '19161', '11589', '10250', '221006', '140495', '81320', '67617', '22232', '14689', '8546', '8304', '231029', '69319', '43633', '10216', '391797', '193427', '58201', '55833', '44045', '460829', '337435', '221320', '221229', '221020', '220823', '66170', '58433', '12339', '435236', '66169', '516043', '71799', '37123', '260160', '102164', '69699', '397532', '176314', '70892', '52988', '140495', '8278', '408545', '10216', '55833', '44045', '12709', '71412', '488863', '343268', '460829', '365131', '337435', '221020', '58433', '56267', '24677', '12339', '220893', '25517', '116571', '103493', '72133', '42608', '41639', '37123', '10281', '260160', '171828', '110211', '397532', '44809', '21229', '9058', '8278', '408545', '65034', '12709', '151745', '488863', '343268', '331366', '8355', '365131', '56267', '24677', '10571', '220893', '202410', '25517', '116571', '103493', '72133', '69922', '51679', '42608', '41639', '33262', '10281', '8332', '386717', '171828', '110211', '74981', '67755', '56018', '44809', '25798', '21229', '9058', '124302', '56251', '65034', '45737', '8573', '100675', '43403', '42908', '151745', '331366', '36019', '8355'}
t = tuple(t)
s = tuple(s)
t = t+s
import csv
sports_list = []
w = open('profiles_stan.csv','a',newline='')
c = csv.writer(w)
for i in range(len(t)):
    try:
        idd = t[i]
        f = requests.get('https://www.admitsee.com/profile-detail/'+idd,'html.parser')
        a = f.text
        sat = a.partition('<span class="p_label">Converted SAT Score</span><span class="lockedfoo theconvertedsat">')[2][:4]
        gpa = a.partition('<div class="t_score thegpa">')[2][:4] 
        act = a.partition('<div class="t_score theact">')[2][:2]
        course = a.partition('<div class="user_major">')[2]
        course = str(course[:course.find('</span>')]).replace('<span itemprop=""title"">', '').replace('""','')
        gender = a.partition('<div class="hidethese"><span class="p_label">Gender</span><span>')[2]
        gender = gender[:gender.find('</span>')]
        ethnicity = a.partition('<div class="hidethese"><span class="p_label">Ethnicity</span><span>')[2]
        ethnicity = ethnicity[:ethnicity.find('</span>')]
        class_year =  a.partition('<span class="p_label">Class of</span><span>')[2][:4]
        firstgen = a.partition('<span class="p_label">First Gen College Student</span><span>')[2]
        firstgen = firstgen[:firstgen.find('</span>')]
        admission = a.partition('<span class="p_label">Admission</span><span>')[2]
        admission = admission[:admission.find('</span>')]
        sports = a.partition('<h2>Sports</h2>\n</div>\n<div class="p_panel_content">\n<span class="p_label">Sports</span><span>')[2]
        sports_list += [sports[:sports.find('</span>')]]
        #o = [idd,sat,gpa,act,gender,ethnicity,class_year,firstgen,]
        #print(o)
        c.writerow([idd,sat,gpa,act,course,gender,ethnicity,class_year,firstgen,admission])
        w.flush()
        #print(idd,sat,gpa,act,gender,ethnicity,class_year,firstgen,sep=',')
    except Exception as e:
        print(e)
w.close()
print(sports_list)     




